# # ==============================================================================
# # 1. КОНФИГУРАЦИЯ TOOLCHAIN И МИКРОКОНТРОЛЛЕРА (F103C6 Low-Density)
# # ==============================================================================
# # Toolchain (должен быть в PATH)
# TOOLCHAIN_DIR = "C:/ST/STM32CubeIDE_1.19.0/STM32CubeIDE/plugins/com.st.stm32cube.ide.mcu.externaltools.gnu-tools-for-stm32.13.3.rel1.win32_1.0.0.202411081344/tools/bin"
# CC = $(TOOLCHAIN_DIR)/arm-none-eabi-gcc
# AR = $(TOOLCHAIN_DIR)/arm-none-eabi-ar      # Архиватор для создания .a

# STATIC_LIB = libhal.a      # Имя целевой статической библиотеки

# MCU_FLAGS = -mcpu=cortex-m3 -mthumb

# # ==============================================================================
# # 2. ПУТИ И ИСТОЧНИКИ
# # ==============================================================================
# C_DIRS = .
# CMSIS_DIR = CMSIS
# C_DIRS += $(CMSIS_DIR)

# # Исходники, которые войдут в статическую библиотеку
# # (Твои модули: adc, dma, myhal)
# HAL_SOURCES = $(wildcard *.c) \
#               $(wildcard $(CMSIS_DIR)/*.c) # Все файлы CMSIS
              
# # Объектные файлы для HAL/CMSIS
# HAL_OBJS = $(HAL_SOURCES:.c=.o)

# # ==============================================================================
# # 3. ФЛАГИ КОМПИЛЯЦИИ
# # ==============================================================================
# CFLAGS = $(MCU_FLAGS) -Wall -g -O2 -std=gnu11
# CFLAGS += -MD -MP # Генерация зависимостей
# CFLAGS += $(addprefix -I,$(C_DIRS)) # Пути для .h файлов

# # Критический флаг для F103C6 (Low Density)
# CFLAGS += -DSTM32F10X_LD

# # ==============================================================================
# # 4. ПРАВИЛА СБОРКИ
# # ==============================================================================
# .PHONY: all lib clean

# # Основная цель: собирает только библиотеку
# all: lib

# # ГЛАВНОЕ ПРАВИЛО: Создание статической библиотеки libhal.a
# lib: $(HAL_OBJS)
# 	@echo "АРХИВИРОВАНИЕ: Создание статической библиотеки $(STATIC_LIB)"
# 	# r: Заменить/добавить файлы, c: Создать архив, s: Создать индекс символов
# 	$(AR) rcs $(STATIC_LIB) $^ 

# # Правило для компиляции C-файлов (остается без изменений)
# %.o: %.c
# 	$(CC) -c $(CFLAGS) $< -o $@

# # Очистка
# clean:
# 	rm -f $(HAL_OBJS) $(STATIC_LIB) 
# 	rm -f $(HAL_OBJS:.o=.d)
	
# # Включение зависимостей
# -include $(HAL_OBJS:.o=.d)